d â† â€¢file.Chars "data.txt"

masks â† {ğ•Šlâ€¿r: "mul(" âˆ¾ (l/â‹ˆ'â') âˆ¾ ',' âˆ¾ (r/â‹ˆ'â•') âˆ¾ ")"}Â¨ â¥Šâˆ¾âŒœËœ 1+â†•3

Nmbr â† (â‰¥âŸœ0âˆ§â‰¤âŸœ9) -âŸœ'0'
MakeCheck â† {ğ•Šmask: {(ğ•©â‰¡'â•')âˆ¨(ğ•©â‰¡'â') ? nmbr ; ğ•©âŠ¸=}Â¨ mask}

GetNmbr â† {chunkğ•Šmask: â€¢ParseFloatÂ¨ {ğ•©âŠ¸/chunk}Â¨ maskâŠ¸=Â¨ "ââ•"}

Match â† {stringğ•Šmask:
  sliceâ†(â‰ mask)â†•string
  {ğ•Šchunk: âˆ§Â´ (MakeCheck mask) {ğ•ğ•©}Â¨ chunk ? chunk â‹ˆ mask ; 0  }Â¨ <Ë˜slice
}

s1 â† +Â´ Ã—Â´Â¨ GetNmbrÂ´Â¨ {0â‰¢ğ•©}Â¨âŠ¸/ âˆ¾ dâŠ¸MatchÂ¨ masks

Combine â† {lâ†âŠ‘âˆ¨â‰ Â¨ğ•© â‹„ {ğ•©â‰¡0?ğ•¨;ğ•©}Â¨Â´ lâŠ¸â†‘Â¨ğ•©}

muls â† {ğ•©â‰¢0? Ã—Â´ GetNmbrÂ´ ğ•©;0}Â¨ Combine dâŠ¸MatchÂ¨ masks
dos â† {ğ•©â‰¢0?'a';0}Â¨ d Match "do()"
donts â† {ğ•©â‰¢0?'d';0}Â¨ d Match "don't()"

cleanList â† {ğ•©â‰¢0}Â¨âŠ¸/ Combine mulsâ€¿dosâ€¿donts

active â† 1
â€¢Show s2 â† {
  'a'ğ•Štotal: activeâ†©1 â‹„ total;
  'd'ğ•Štotal: activeâ†©0 â‹„ total;
  vğ•Štotal: total + v Ã— active
}Â´ cleanList
